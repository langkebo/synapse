 Image synapse_rust-synapse-rust Building 
#1 [internal] load local bake definitions
#1 reading from stdin 602B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 8.26kB done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/rust:1-alpine
#3 ...

#4 [internal] load metadata for docker.io/library/debian:bookworm-slim
#4 DONE 0.2s

#3 [internal] load metadata for docker.io/library/rust:1-alpine
#3 DONE 0.8s

#5 [runtime  1/10] FROM docker.io/library/debian:bookworm-slim@sha256:98f4b71de414932439ac6ac690d7060df1f27161073c5036a7553723881bffbe
#5 resolve docker.io/library/debian:bookworm-slim@sha256:98f4b71de414932439ac6ac690d7060df1f27161073c5036a7553723881bffbe 0.0s done
#5 DONE 0.0s

#6 [internal] load .dockerignore
#6 transferring context: 141B done
#6 DONE 0.0s

#7 [builder 1/7] FROM docker.io/library/rust:1-alpine@sha256:69d7b9d9aeaf108a1419d9a7fcf7860dcc043e9dbd1ab7ce88e44228774d99e9
#7 resolve docker.io/library/rust:1-alpine@sha256:69d7b9d9aeaf108a1419d9a7fcf7860dcc043e9dbd1ab7ce88e44228774d99e9 0.0s done
#7 sha256:b2cb3bc09ef100528982994e39af3d1ffc9736d148a946e22f198f47bb2606ed 75.12MB / 75.12MB 605.4s done
#7 extracting sha256:b2cb3bc09ef100528982994e39af3d1ffc9736d148a946e22f198f47bb2606ed 1.8s done
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 163.58MB / 267.37MB 1079.1s
#7 ...

#8 [internal] load build context
#8 transferring context: 1.23MB 0.0s done
#8 DONE 0.1s

#7 [builder 1/7] FROM docker.io/library/rust:1-alpine@sha256:69d7b9d9aeaf108a1419d9a7fcf7860dcc043e9dbd1ab7ce88e44228774d99e9
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 164.63MB / 267.37MB 1084.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 165.68MB / 267.37MB 1089.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 166.72MB / 267.37MB 1094.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 167.77MB / 267.37MB 1099.5s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 168.82MB / 267.37MB 1104.6s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 169.87MB / 267.37MB 1109.7s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 170.92MB / 267.37MB 1114.8s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 171.97MB / 267.37MB 1119.9s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 173.02MB / 267.37MB 1125.0s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 174.06MB / 267.37MB 1130.1s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 175.11MB / 267.37MB 1135.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 176.16MB / 267.37MB 1140.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 177.21MB / 267.37MB 1145.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 178.26MB / 267.37MB 1150.5s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 179.31MB / 267.37MB 1155.6s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 180.36MB / 267.37MB 1160.7s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 181.40MB / 267.37MB 1165.8s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 182.45MB / 267.37MB 1170.9s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 183.50MB / 267.37MB 1176.0s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 184.55MB / 267.37MB 1181.1s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 185.60MB / 267.37MB 1186.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 187.70MB / 267.37MB 1191.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 188.74MB / 267.37MB 1196.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 189.79MB / 267.37MB 1201.5s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 190.84MB / 267.37MB 1206.6s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 191.89MB / 267.37MB 1211.7s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 192.94MB / 267.37MB 1216.8s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 193.99MB / 267.37MB 1221.9s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 195.04MB / 267.37MB 1227.0s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 196.08MB / 267.37MB 1232.1s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 197.13MB / 267.37MB 1237.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 198.18MB / 267.37MB 1242.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 199.23MB / 267.37MB 1247.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 200.28MB / 267.37MB 1252.5s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 201.33MB / 267.37MB 1257.6s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 203.42MB / 267.37MB 1262.7s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 204.47MB / 267.37MB 1267.8s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 205.52MB / 267.37MB 1272.9s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 205.52MB / 267.37MB 1278.0s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 207.62MB / 267.37MB 1283.1s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 208.67MB / 267.37MB 1288.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 209.72MB / 267.37MB 1293.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 210.76MB / 267.37MB 1298.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 211.81MB / 267.37MB 1303.5s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 212.86MB / 267.37MB 1308.6s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 213.91MB / 267.37MB 1313.7s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 214.96MB / 267.37MB 1318.8s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 216.01MB / 267.37MB 1323.9s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 217.06MB / 267.37MB 1329.0s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 218.10MB / 267.37MB 1334.1s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 219.15MB / 267.37MB 1339.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 221.25MB / 267.37MB 1344.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 222.30MB / 267.37MB 1349.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 223.35MB / 267.37MB 1354.5s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 224.40MB / 267.37MB 1359.6s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 225.44MB / 267.37MB 1364.7s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 226.49MB / 267.37MB 1369.8s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 227.54MB / 267.37MB 1374.9s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 228.59MB / 267.37MB 1380.0s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 229.64MB / 267.37MB 1385.1s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 230.69MB / 267.37MB 1390.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 231.74MB / 267.37MB 1395.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 232.78MB / 267.37MB 1400.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 233.83MB / 267.37MB 1405.5s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 234.88MB / 267.37MB 1410.6s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 235.93MB / 267.37MB 1415.7s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 236.98MB / 267.37MB 1420.8s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 238.03MB / 267.37MB 1425.9s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 239.08MB / 267.37MB 1431.0s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 241.17MB / 267.37MB 1436.1s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 242.22MB / 267.37MB 1441.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 243.27MB / 267.37MB 1446.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 244.32MB / 267.37MB 1451.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 245.37MB / 267.37MB 1456.5s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 246.42MB / 267.37MB 1461.6s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 247.46MB / 267.37MB 1466.7s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 248.51MB / 267.37MB 1471.8s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 249.56MB / 267.37MB 1476.9s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 250.61MB / 267.37MB 1482.0s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 251.66MB / 267.37MB 1487.1s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 252.71MB / 267.37MB 1492.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 253.76MB / 267.37MB 1497.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 254.80MB / 267.37MB 1502.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 255.85MB / 267.37MB 1507.5s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 256.90MB / 267.37MB 1512.6s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 259.00MB / 267.37MB 1517.7s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 260.05MB / 267.37MB 1522.8s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 261.10MB / 267.37MB 1527.9s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 262.14MB / 267.37MB 1533.0s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 263.19MB / 267.37MB 1538.1s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 264.24MB / 267.37MB 1543.2s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 265.29MB / 267.37MB 1548.3s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 266.34MB / 267.37MB 1553.4s
#7 sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 267.37MB / 267.37MB 1554.9s done
#7 extracting sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654
#7 extracting sha256:35751de1c97a41793e5081e5588653cca0eb71d8252008b728aac03e453f6654 6.6s done
#7 DONE 1561.7s

#9 [builder 2/7] RUN apk add --no-cache     musl-dev     libpq-dev     openssl-dev     cargo     git
#9 13.66 ( 1/24) Installing libffi (3.5.2-r0)
#9 13.92 ( 2/24) Installing xz-libs (5.8.2-r0)
#9 14.34 ( 3/24) Installing libxml2 (2.13.9-r0)
#9 16.39 ( 4/24) Installing llvm21-libs (21.1.2-r1)
#9 312.7 ( 5/24) Installing scudo-malloc (21.1.2-r0)
#9 313.0 ( 6/24) Installing rust (1.91.1-r0)
#9 671.2 ( 7/24) Installing brotli-libs (1.2.0-r0)
#9 673.8 ( 8/24) Installing c-ares (1.34.6-r0)
#9 674.5 ( 9/24) Installing libunistring (1.4.1-r0)
#9 677.6 (10/24) Installing libidn2 (2.3.8-r0)
#9 678.0 (11/24) Installing nghttp2-libs (1.68.0-r0)
#9 678.4 (12/24) Installing nghttp3 (1.13.1-r0)
#9 678.7 (13/24) Installing libpsl (0.21.5-r3)
#9 679.1 (14/24) Installing libcurl (8.17.0-r1)
#9 680.3 (15/24) Installing sqlite-libs (3.51.2-r0)
#9 684.3 (16/24) Installing cargo (1.91.1-r0)
#9 729.9 (17/24) Installing libexpat (2.7.4-r0)
#9 730.3 (18/24) Installing pcre2 (10.47-r0)
#9 731.5 (19/24) Installing git (2.52.0-r0)
#9 749.1 (20/24) Installing git-init-template (2.52.0-r0)
#9 749.3 (21/24) Installing libpq (18.1-r0)
#9 750.2 (22/24) Installing pkgconf (2.5.1-r0)
#9 750.6 (23/24) Installing openssl-dev (3.5.5-r0)
#9 751.9 (24/24) Installing libpq-dev (18.1-r0)
#9 755.5 Executing busybox-1.37.0-r30.trigger
#9 755.5 OK: 621.8 MiB in 54 packages
#9 DONE 755.6s

#10 [builder 3/7] WORKDIR /build
#10 DONE 0.1s

#11 [builder 4/7] COPY Cargo.toml Cargo.lock ./
#11 DONE 0.1s

#12 [builder 5/7] RUN mkdir -p src &&     echo 'fn main() {}' > src/main.rs &&     cargo build --release --target x86_64-unknown-linux-musl 2>&1 | grep -v "Compiling" || true
#12 0.513     Updating crates.io index
#12 134.7  Downloading crates ...
#12 134.7   Downloaded aead v0.5.2
#12 134.7   Downloaded adler2 v2.0.1
#12 134.7   Downloaded const-random-macro v0.1.16
#12 134.7   Downloaded atoi v2.0.0
#12 134.7   Downloaded block-buffer v0.10.4
#12 134.7   Downloaded http-body v1.0.1
#12 134.7   Downloaded const-random v0.1.18
#12 134.7   Downloaded cfg-if v1.0.4
#12 134.7   Downloaded atomic-waker v1.1.2
#12 134.7   Downloaded darling_macro v0.21.3
#12 134.7   Downloaded crc-catalog v2.4.0
#12 134.7   Downloaded home v0.5.12
#12 134.7   Downloaded hyper-tls v0.6.0
#12 134.7   Downloaded crc v3.4.0
#12 134.7   Downloaded deadpool-runtime v0.1.4
#12 134.7   Downloaded deadpool-redis v0.18.0
#12 134.7   Downloaded cpufeatures v0.2.17
#12 134.7   Downloaded equivalent v1.0.2
#12 134.7   Downloaded foreign-types-shared v0.1.1
#12 134.7   Downloaded futures-core v0.3.31
#12 134.7   Downloaded foreign-types v0.3.2
#12 134.7   Downloaded errno v0.3.14
#12 134.7   Downloaded forwarded-header-value v0.1.1
#12 134.7   Downloaded form_urlencoded v1.2.2
#12 134.7   Downloaded futures-task v0.3.31
#12 134.7   Downloaded ident_case v1.0.1
#12 134.7   Downloaded futures-macro v0.3.31
#12 134.7   Downloaded futures-io v0.3.31
#12 134.7   Downloaded inout v0.1.4
#12 134.7   Downloaded lazy_static v1.5.0
#12 134.7   Downloaded json5 v0.4.1
#12 134.7   Downloaded mime v0.3.17
#12 141.7   Downloaded md-5 v0.10.6
#12 141.7   Downloaded nonempty v0.7.0
#12 141.7   Downloaded matchers v0.2.0
#12 141.7   Downloaded compression-core v0.4.31
#12 141.7   Downloaded nonzero_ext v0.3.0
#12 141.7   Downloaded crossbeam-queue v0.3.12
#12 141.7   Downloaded crypto-common v0.1.7
#12 141.7   Downloaded num_cpus v1.17.0
#12 141.7   Downloaded openssl-probe v0.1.6
#12 141.7   Downloaded pathdiff v0.2.3
#12 141.7   Downloaded curve25519-dalek-derive v0.1.1
#12 141.7   Downloaded openssl-macros v0.1.1
#12 141.7   Downloaded opaque-debug v0.3.1
#12 141.7   Downloaded num-conv v0.2.0
#12 141.7   Downloaded deadpool-postgres v0.12.1
#12 141.7   Downloaded parking v2.2.1
#12 141.7   Downloaded event-listener-strategy v0.5.4
#12 141.7   Downloaded crunchy v0.2.4
#12 141.7   Downloaded dyn-clone v1.0.20
#12 141.7   Downloaded ghash v0.5.1
#12 141.7   Downloaded futures-sink v0.3.31
#12 141.7   Downloaded percent-encoding v2.3.2
#12 141.7   Downloaded http-range-header v0.4.2
#12 141.7   Downloaded httpdate v1.0.3
#12 141.7   Downloaded compression-codecs v0.4.36
#12 141.7   Downloaded convert_case v0.6.0
#12 141.7   Downloaded cipher v0.4.4
#12 141.7   Downloaded autocfg v1.5.0
#12 141.7   Downloaded integer-encoding v3.0.4
#12 141.7   Downloaded ctr v0.9.2
#12 141.7   Downloaded concurrent-queue v2.5.0
#12 141.7   Downloaded fallible-iterator v0.2.0
#12 147.9   Downloaded deadpool v0.10.0
#12 147.9   Downloaded dlv-list v0.5.2
#12 147.9   Downloaded itoa v1.0.17
#12 147.9   Downloaded fnv v1.0.7
#12 147.9   Downloaded idna_adapter v1.2.1
#12 147.9   Downloaded futures-channel v0.3.31
#12 147.9   Downloaded dotenvy v0.15.7
#12 147.9   Downloaded futures-executor v0.3.31
#12 147.9   Downloaded foldhash v0.2.0
#12 147.9   Downloaded foldhash v0.1.5
#12 147.9   Downloaded find-msvc-tools v0.1.8
#12 147.9   Downloaded byteorder v1.5.0
#12 147.9   Downloaded arraydeque v0.5.1
#12 147.9   Downloaded argon2 v0.5.3
#12 147.9   Downloaded lru v0.12.5
#12 147.9   Downloaded async-trait v0.1.89
#12 147.9   Downloaded ordered-float v2.10.1
#12 147.9   Downloaded hex v0.4.3
#12 147.9   Downloaded dashmap v6.1.0
#12 147.9   Downloaded glob v0.3.3
#12 147.9   Downloaded base64ct v1.8.3
#12 147.9   Downloaded either v1.15.0
#12 147.9   Downloaded ed25519 v2.2.3
#12 147.9   Downloaded num-iter v0.1.45
#12 147.9   Downloaded digest v0.10.7
#12 147.9   Downloaded futures-timer v3.0.3
#12 147.9   Downloaded ipnetwork v0.20.0
#12 147.9   Downloaded generic-array v0.14.7
#12 147.9   Downloaded mime_guess v2.0.5
#12 147.9   Downloaded ordered-multimap v0.7.3
#12 147.9   Downloaded potential_utf v0.1.4
#12 147.9   Downloaded native-tls v0.2.14
#12 147.9   Downloaded pem v3.0.6
#12 147.9   Downloaded password-hash v0.5.0
#12 157.6   Downloaded ahash v0.8.12
#12 157.6   Downloaded ordered-float v4.6.0
#12 157.6   Downloaded num-integer v0.1.46
#12 157.6   Downloaded blake2 v0.10.6
#12 157.6   Downloaded axum-macros v0.5.0
#12 157.6   Downloaded axum-core v0.5.6
#12 157.6   Downloaded async-lock v3.4.2
#12 157.6   Downloaded hashlink v0.8.4
#12 157.6   Downloaded hashlink v0.10.0
#12 157.6   Downloaded deranged v0.5.5
#12 157.6   Downloaded darling v0.21.3
#12 157.6   Downloaded heck v0.5.0
#12 157.6   Downloaded deadpool v0.12.3
#12 157.6   Downloaded crc32fast v1.5.0
#12 157.6   Downloaded hyper-timeout v0.5.2
#12 157.6   Downloaded http-body-util v0.1.3
#12 157.6   Downloaded crossbeam-epoch v0.9.18
#12 157.6   Downloaded ipnet v2.11.0
#12 157.6   Downloaded lock_api v0.4.14
#12 157.6   Downloaded phf_shared v0.13.1
#12 157.6   Downloaded pest_generator v2.8.5
#12 157.6   Downloaded pin-utils v0.1.0
#12 157.6   Downloaded rand_chacha v0.3.1
#12 157.6   Downloaded getrandom v0.2.17
#12 157.6   Downloaded powerfmt v0.2.0
#12 157.6   Downloaded phf v0.13.1
#12 157.6   Downloaded ref-cast v1.0.25
#12 157.6   Downloaded ref-cast-impl v1.0.25
#12 157.6   Downloaded rustc_version v0.4.1
#12 157.6   Downloaded allocator-api2 v0.2.21
#12 157.6   Downloaded ppv-lite86 v0.2.21
#12 157.6   Downloaded const-oid v0.9.6
#12 157.6   Downloaded futures v0.3.31
#12 157.6   Downloaded displaydoc v0.2.5
#12 164.8   Downloaded nu-ansi-term v0.50.3
#12 164.8   Downloaded matchit v0.8.4
#12 164.8   Downloaded bitflags v2.10.0
#12 164.8   Downloaded config v0.14.1
#12 164.8   Downloaded pem-rfc7468 v0.7.0
#12 164.8   Downloaded parking_lot_core v0.9.12
#12 164.8   Downloaded event-listener v5.4.1
#12 164.8   Downloaded parking_lot v0.12.5
#12 164.8   Downloaded once_cell v1.21.3
#12 164.8   Downloaded iana-time-zone v0.1.65
#12 164.8   Downloaded hyper-rustls v0.27.7
#12 164.8   Downloaded pin-project-internal v1.1.10
#12 164.8   Downloaded pkg-config v0.3.32
#12 164.8   Downloaded pkcs8 v0.10.2
#12 164.8   Downloaded polyval v0.6.2
#12 164.8   Downloaded postgres-protocol v0.6.10
#12 164.8   Downloaded scopeguard v1.2.0
#12 164.8   Downloaded litemap v0.8.1
#12 164.8   Downloaded serde_spanned v0.6.9
#12 164.8   Downloaded sha1_smol v1.0.1
#12 164.8   Downloaded sha1 v0.10.6
#12 164.8   Downloaded pest_meta v2.8.5
#12 164.8   Downloaded anyhow v1.0.100
#12 164.8   Downloaded pest_derive v2.8.5
#12 164.8   Downloaded quote v1.0.44
#12 164.8   Downloaded rand_core v0.6.4
#12 164.8   Downloaded rand_chacha v0.9.0
#12 164.8   Downloaded rand_core v0.9.5
#12 164.8   Downloaded sqlx-macros v0.8.6
#12 164.8   Downloaded strsim v0.11.1
#12 164.8   Downloaded rust-ini v0.20.0
#12 164.8   Downloaded signature v2.2.0
#12 164.8   Downloaded siphasher v1.0.2
#12 174.3   Downloaded serde_urlencoded v0.7.1
#12 174.3   Downloaded base64 v0.22.1
#12 174.3   Downloaded subtle v2.6.1
#12 174.3   Downloaded rustversion v1.0.22
#12 174.3   Downloaded sync_wrapper v1.0.2
#12 174.3   Downloaded darling_core v0.21.3
#12 174.3   Downloaded bytes v1.11.0
#12 174.3   Downloaded httparse v1.10.1
#12 174.3   Downloaded getrandom v0.3.4
#12 174.3   Downloaded icu_provider v2.1.1
#12 174.3   Downloaded jsonwebtoken v9.3.1
#12 174.3   Downloaded flume v0.11.1
#12 174.3   Downloaded flate2 v1.1.8
#12 174.3   Downloaded opentelemetry-semantic-conventions v0.13.0
#12 174.3   Downloaded time-core v0.1.8
#12 174.3   Downloaded tinyvec_macros v0.1.1
#12 174.3   Downloaded pkcs1 v0.7.5
#12 174.3   Downloaded postgres-types v0.2.12
#12 174.3   Downloaded hmac v0.12.1
#12 174.3   Downloaded semver v1.0.27
#12 174.3   Downloaded serde_path_to_error v0.1.20
#12 174.3   Downloaded icu_properties v2.1.2
#12 174.3   Downloaded quanta v0.12.6
#12 174.3   Downloaded log v0.4.29
#12 174.3   Downloaded simd-adler32 v0.3.8
#12 174.3   Downloaded rustls-pki-types v1.14.0
#12 174.3   Downloaded slab v0.4.11
#12 174.3   Downloaded shlex v1.3.0
#12 174.3   Downloaded num-traits v0.2.19
#12 174.3   Downloaded spki v0.7.3
#12 174.3   Downloaded stringprep v0.1.5
#12 174.3   Downloaded toml_write v0.1.2
#12 174.3   Downloaded toml_datetime v0.6.11
#12 179.0   Downloaded tower-layer v0.3.3
#12 179.0   Downloaded tower-service v0.3.3
#12 179.0   Downloaded crossbeam-utils v0.8.21
#12 179.0   Downloaded async-compression v0.4.37
#12 179.0   Downloaded pin-project-lite v0.2.16
#12 179.0   Downloaded crossbeam-channel v0.5.15
#12 179.0   Downloaded ed25519-dalek v2.2.0
#12 179.0   Downloaded arc-swap v1.8.0
#12 179.0   Downloaded base64 v0.21.7
#12 179.0   Downloaded cc v1.2.54
#12 179.0   Downloaded der v0.7.10
#12 179.0   Downloaded signal-hook-registry v1.4.8
#12 179.0   Downloaded futures-intrusive v0.5.0
#12 179.0   Downloaded synstructure v0.13.2
#12 179.0   Downloaded stable_deref_trait v1.2.1
#12 179.0   Downloaded sqlx-macros-core v0.8.6
#12 179.0   Downloaded thiserror-impl v1.0.69
#12 179.0   Downloaded thiserror v2.0.18
#12 179.0   Downloaded tiny-keccak v2.0.2
#12 179.0   Downloaded threadpool v1.8.1
#12 179.0   Downloaded thread_local v1.1.9
#12 179.0   Downloaded tokio-macros v2.6.0
#12 179.0   Downloaded tagptr v0.2.0
#12 179.0   Downloaded tinystr v0.8.2
#12 179.0   Downloaded thiserror-impl v2.0.18
#12 179.0   Downloaded time-macros v0.2.26
#12 179.0   Downloaded tracing-serde v0.2.0
#12 179.0   Downloaded tokio-native-tls v0.3.1
#12 179.0   Downloaded try-lock v0.2.5
#12 179.0   Downloaded proc-macro2 v1.0.106
#12 179.0   Downloaded serde_with_macros v3.16.1
#12 189.1   Downloaded sha2 v0.10.9
#12 189.1   Downloaded urlencoding v2.1.3
#12 189.1   Downloaded universal-hash v0.5.1
#12 189.1   Downloaded untrusted v0.9.0
#12 189.1   Downloaded utf8_iter v1.0.4
#12 189.1   Downloaded want v0.3.1
#12 189.1   Downloaded void v1.0.2
#12 189.1   Downloaded version_check v0.9.5
#12 189.1   Downloaded openssl-sys v0.9.111
#12 189.1   Downloaded spin v0.9.8
#12 189.1   Downloaded smallvec v1.15.1
#12 189.1   Downloaded simple_asn1 v0.6.3
#12 189.1   Downloaded miniz_oxide v0.8.9
#12 189.1   Downloaded icu_locale_core v2.1.1
#12 189.1   Downloaded indexmap v1.9.3
#12 189.1   Downloaded zerofrom v0.1.6
#12 189.1   Downloaded yoke-derive v0.8.1
#12 189.1   Downloaded tracing-appender v0.2.4
#12 189.1   Downloaded tracing-log v0.2.0
#12 189.1   Downloaded ryu v1.0.22
#12 189.1   Downloaded thrift v0.17.0
#12 189.1   Downloaded zerofrom-derive v0.1.6
#12 189.1   Downloaded zeroize_derive v1.4.3
#12 189.1   Downloaded pin-project v1.1.10
#12 189.1   Downloaded serde_derive v1.0.228
#12 189.1   Downloaded ron v0.8.1
#12 189.1   Downloaded socket2 v0.5.10
#12 189.1   Downloaded thiserror v1.0.69
#12 189.1   Downloaded socket2 v0.6.2
#12 189.1   Downloaded whoami v1.6.1
#12 189.1   Downloaded web-time v1.1.0
#12 189.1   Downloaded whoami v2.1.0
#12 189.1   Downloaded unicase v2.9.0
#12 189.1   Downloaded yoke v0.8.1
#12 200.4   Downloaded tracing-attributes v0.1.31
#12 200.4   Downloaded zeroize v1.8.2
#12 200.4   Downloaded tinyvec v1.10.0
#12 200.4   Downloaded zerovec-derive v0.11.2
#12 200.4   Downloaded zmij v1.0.17
#12 200.4   Downloaded opentelemetry v0.21.0
#12 200.4   Downloaded tokio-stream v0.1.18
#12 200.4   Downloaded rand v0.8.5
#12 200.4   Downloaded icu_normalizer_data v2.1.1
#12 200.4   Downloaded icu_collections v2.1.1
#12 200.4   Downloaded rsa v0.9.10
#12 200.4   Downloaded icu_normalizer v2.1.1
#12 200.4   Downloaded sqlx-mysql v0.8.6
#12 200.4   Downloaded minimal-lexical v0.2.1
#12 200.4   Downloaded tokio-rustls v0.26.4
#12 200.4   Downloaded writeable v0.6.2
#12 200.4   Downloaded tower_governor v0.8.0
#12 200.4   Downloaded unicode-bidi v0.3.18
#12 200.4   Downloaded schemars v0.9.0
#12 200.4   Downloaded uuid v1.20.0
#12 200.4   Downloaded rand v0.9.2
#12 200.4   Downloaded serde_core v1.0.228
#12 200.4   Downloaded sqlx-sqlite v0.8.6
#12 200.4   Downloaded spinning_top v0.3.0
#12 200.4   Downloaded sharded-slab v0.1.7
#12 200.4   Downloaded aes-gcm v0.10.3
#12 200.4   Downloaded aes v0.8.4
#12 200.4   Downloaded combine v4.6.7
#12 200.4   Downloaded unicode-properties v0.1.4
#12 200.4   Downloaded hashbrown v0.12.3
#12 200.4   Downloaded mio v1.1.1
#12 200.4   Downloaded tracing-core v0.1.36
#12 200.4   Downloaded indexmap v2.13.0
#12 214.2   Downloaded memchr v2.7.6
#12 214.2   Downloaded toml v0.8.23
#12 214.2   Downloaded zerotrie v0.2.3
#12 214.2   Downloaded typenum v1.19.0
#12 214.2   Downloaded url v2.5.8
#12 214.2   Downloaded tower v0.5.3
#12 214.2   Downloaded axum v0.8.8
#12 214.2   Downloaded rustls-webpki v0.103.9
#12 214.2   Downloaded pest v2.8.5
#12 214.2   Downloaded ucd-trie v0.1.7
#12 214.2   Downloaded unicode-ident v1.0.22
#12 214.2   Downloaded aho-corasick v1.1.4
#12 214.2   Downloaded toml_edit v0.22.27
#12 214.2   Downloaded num-bigint v0.4.6
#12 214.2   Downloaded serde_json v1.0.149
#12 214.2   Downloaded tower-http v0.6.8
#12 214.2   Downloaded zerocopy-derive v0.8.35
#12 214.2   Downloaded schemars v1.2.0
#12 214.2   Downloaded regex v1.12.2
#12 214.2   Downloaded serde v1.0.228
#12 214.2   Downloaded portable-atomic v1.13.0
#12 214.2   Downloaded sqlx-postgres v0.8.6
#12 214.2   Downloaded http v1.4.0
#12 214.2   Downloaded tracing-opentelemetry v0.22.0
#12 214.2   Downloaded nom v7.1.3
#12 214.2   Downloaded num-bigint-dig v0.8.6
#12 214.2   Downloaded opentelemetry_sdk v0.21.2
#12 214.2   Downloaded chrono v0.4.43
#12 214.2   Downloaded hyper-util v0.1.19
#12 214.2   Downloaded serde_with v3.16.1
#12 214.2   Downloaded governor v0.10.4
#12 214.2   Downloaded elasticsearch v8.15.0-alpha.1
#12 214.2   Downloaded raw-cpuid v11.6.0
#12 231.5   Downloaded tokio-postgres v0.7.16
#12 231.5   Downloaded time v0.3.46
#12 231.5   Downloaded hashbrown v0.15.5
#12 231.5   Downloaded hashbrown v0.16.1
#12 231.5   Downloaded redis v0.27.6
#12 231.5   Downloaded curve25519-dalek v4.1.3
#12 231.5   Downloaded hashbrown v0.14.5
#12 231.5   Downloaded idna v1.1.0
#12 231.5   Downloaded tonic v0.14.3
#12 231.5   Downloaded syn v2.0.114
#12 231.5   Downloaded itertools v0.13.0
#12 231.5   Downloaded regex-syntax v0.8.8
#12 231.5   Downloaded x25519-dalek v2.0.1
#12 231.5   Downloaded sqlx-core v0.8.6
#12 231.5   Downloaded hyper v1.8.1
#12 231.5   Downloaded opentelemetry-jaeger v0.20.0
#12 231.5   Downloaded futures-util v0.3.31
#12 231.5   Downloaded iri-string v0.7.10
#12 231.5   Downloaded icu_properties_data v2.1.2
#12 231.5   Downloaded hkdf v0.12.4
#12 231.5   Downloaded unicode-segmentation v1.12.0
#12 231.5   Downloaded reqwest v0.12.28
#12 231.5   Downloaded h2 v0.4.13
#12 231.5   Downloaded libm v0.2.16
#12 231.5   Downloaded unicode-normalization v0.1.25
#12 231.5   Downloaded encoding_rs v0.8.35
#12 231.5   Downloaded zerovec v0.11.5
#12 231.5   Downloaded tokio-util v0.7.18
#12 231.5   Downloaded yaml-rust2 v0.8.1
#12 231.5   Downloaded sqlx v0.8.6
#12 231.5   Downloaded moka v0.12.13
#12 231.5   Downloaded winnow v0.7.14
#12 231.5   Downloaded tracing-subscriber v0.3.22
#12 524.0   Downloaded openssl v0.10.75
#12 524.0   Downloaded vcpkg v0.2.15
#12 524.0   Downloaded zerocopy v0.8.35
#12 524.0   Downloaded rustls v0.23.36
#12 524.0   Downloaded tracing v0.1.44
#12 524.0   Downloaded regex-automata v0.4.13
#12 524.0   Downloaded libc v0.2.180
#12 524.0   Downloaded tokio v1.49.0
#12 524.0   Downloaded ring v0.17.14
#12 524.0   Downloaded libsqlite3-sys v0.30.1
#12 524.0 error: couldn't read `src/bin/generate_test_keypair.rs`: No such file or directory (os error 2)
#12 524.0 
#12 524.0 error: could not compile `synapse-rust` (bin "generate_test_keypair") due to 1 previous error
#12 524.0 warning: build failed, waiting for other jobs to finish...
#12 DONE 524.2s

#13 [builder 6/7] COPY src ./src
#13 DONE 0.7s

#14 [builder 7/7] RUN cargo build --release --target x86_64-unknown-linux-musl
#14 1.413    Compiling synapse-rust v0.1.0 (/build)
#14 2.017 error: set `DATABASE_URL` to use query macros online, or run `cargo sqlx prepare` to update the query cache
#14 2.017   --> src/federation/key_rotation.rs:82:9
#14 2.017    |
#14 2.017 82 | /         sqlx::query!(
#14 2.017 83 | |             r#"
#14 2.017 84 | |             INSERT INTO federation_signing_keys (key_id, secret_key, public_key, created_at, expires_at)
#14 2.017 85 | |             VALUES ($1, $2, $3, $4, $5)
#14 2.017 ...  |
#14 2.017 96 | |             signing_key.expires_at,
#14 2.017 97 | |         )
#14 2.017    | |_________^
#14 2.017    |
#14 2.017    = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)
#14 2.017 
#14 2.018 error: set `DATABASE_URL` to use query macros online, or run `cargo sqlx prepare` to update the query cache
#14 2.018    --> src/federation/key_rotation.rs:230:26
#14 2.018     |
#14 2.018 230 |           let key_record = sqlx::query!(
#14 2.018     |  __________________________^
#14 2.018 231 | |             r#"
#14 2.018 232 | |             SELECT public_key, expires_at FROM federation_signing_keys WHERE key_id = $1
#14 2.018 233 | |             "#,
#14 2.018 234 | |             key_id
#14 2.018 235 | |         )
#14 2.018     | |_________^
#14 2.018     |
#14 2.018     = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)
#14 2.018 
#14 2.061 error: error canonicalizing migration directory /build/./migrations: No such file or directory (os error 2)
#14 2.061  --> src/services/database_initializer.rs:8:44
#14 2.061   |
#14 2.061 8 | static MIGRATOR: sqlx::migrate::Migrator = sqlx::migrate!("./migrations");
#14 2.061   |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#14 2.061   |
#14 2.061   = note: this error originates in the macro `$crate::sqlx_macros::migrate` which comes from the expansion of the macro `sqlx::migrate` (in Nightly builds, run with -Z macro-backtrace for more info)
#14 2.061 
#14 18.88 error: could not compile `synapse-rust` (lib) due to 3 previous errors
#14 ERROR: process "/bin/sh -c cargo build --release --target x86_64-unknown-linux-musl" did not complete successfully: exit code: 101
------
 > [builder 7/7] RUN cargo build --release --target x86_64-unknown-linux-musl:
2.018 
2.061 error: error canonicalizing migration directory /build/./migrations: No such file or directory (os error 2)
2.061  --> src/services/database_initializer.rs:8:44
2.061   |
2.061 8 | static MIGRATOR: sqlx::migrate::Migrator = sqlx::migrate!("./migrations");
2.061   |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2.061   |
2.061   = note: this error originates in the macro `$crate::sqlx_macros::migrate` which comes from the expansion of the macro `sqlx::migrate` (in Nightly builds, run with -Z macro-backtrace for more info)
2.061 
18.88 error: could not compile `synapse-rust` (lib) due to 3 previous errors
------
failed to solve: process "/bin/sh -c cargo build --release --target x86_64-unknown-linux-musl" did not complete successfully: exit code: 101

